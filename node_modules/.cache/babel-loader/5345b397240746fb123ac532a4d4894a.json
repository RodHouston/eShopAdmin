{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getStorage, ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\nimport app from \"../firebase\";\nexport default async function AddPhotoToFireBase(multiPhotos) {\n  _s();\n\n  // const extraPhotos = useSelector(state => state.product.extraPhotos)\n  const dispatch = useDispatch();\n  console.log(\"TRYING TO GET HERE\");\n  let pho;\n  console.log(\"multi insde upload\"); // console.log(extraPhotos);\n\n  console.log(multiPhotos);\n  let itemsProcessed = 0;\n  let itemsProcessed1 = 0;\n\n  if (multiPhotos.length <= 0) {//   handleUpdate()\n  }\n\n  multiPhotos.map((file, idx) => {\n    console.log(\"upload photo\"); //  console.log(file);\n    //  console.log(idx);\n\n    const fileName = new Date().getTime() + file.name;\n    const storage = getStorage(app);\n    const StorageRef = ref(storage, fileName);\n    const uploadTask = uploadBytesResumable(StorageRef, file); // Register three observers:\n    // 1. 'state_changed' observer, called any time the state changes\n    // 2. Error observer, called on failure\n    // 3. Completion observer, called on successful completion\n\n    uploadTask.on('state_changed', snapshot => {\n      // Observe state change events such as progress, pause, and resume\n      // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n      const progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n      console.log('Upload is ' + progress + '% done');\n\n      switch (snapshot.state) {\n        case 'paused':\n          console.log('Upload is paused');\n          break;\n\n        case 'running':\n          console.log('Upload is running');\n          break;\n\n        default:\n      }\n\n      console.log('Upload is ' + progress + '% done');\n    }, error => {\n      // Handle unsuccessful uploads\n      console.log(error);\n    }, () => {\n      // Handle successful uploads on complete\n      // For instance, get the download URL: https://firebasestorage.googleapis.com/...\n      getDownloadURL(uploadTask.snapshot.ref).then(async downloadURL => {\n        console.log('File available at', downloadURL);\n        await dispatch(addPhotos(downloadURL)); // pho[idx]=idx\n        // console.log(extraPhotos);\n\n        console.log(idx); // setMultiPhotosUpload(multiPhotosUpload => [...multiPhotosUpload, downloadURL])\n        // photos.push(downloadURL)   \n\n        itemsProcessed1++;\n        console.log(itemsProcessed1);\n      });\n      console.log(itemsProcessed);\n    });\n    itemsProcessed++; //   if (itemsProcessed === multiPhotos.length) {\n    //     console.log(\"bout tot call update\");\n    //     // setInputs(product => [...product, inputs])\n    //     console.log(extraPhotos);\n    //     console.log(\"running UPDATE\");\n    //     // handleUpdate()\n    //   }\n  });\n  console.log(pho);\n  return pho;\n}\n\n_s(AddPhotoToFireBase, \"rgTLoBID190wEKCp9+G8W6F7A5M=\", false, function () {\n  return [useDispatch];\n});\n\n_c = AddPhotoToFireBase;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddPhotoToFireBase\");","map":{"version":3,"sources":["/Users/roderickhouston/Desktop/GA Projects/eCommerceAdmin/src/redux/toFirebase.js"],"names":["useDispatch","useSelector","getStorage","ref","uploadBytesResumable","getDownloadURL","app","AddPhotoToFireBase","multiPhotos","dispatch","console","log","pho","itemsProcessed","itemsProcessed1","length","map","file","idx","fileName","Date","getTime","name","storage","StorageRef","uploadTask","on","snapshot","progress","bytesTransferred","totalBytes","state","error","then","downloadURL","addPhotos"],"mappings":";;AACA,SAASA,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,UAAT,EAAqBC,GAArB,EAA0BC,oBAA1B,EAAgDC,cAAhD,QAAsE,kBAAtE;AACA,OAAOC,GAAP,MAAgB,aAAhB;AAEA,eAAe,eAAgBC,kBAAhB,CAAmCC,WAAnC,EAAgD;AAAA;;AAE3D;AACA,QAAMC,QAAQ,GAAGT,WAAW,EAA5B;AACAU,EAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACA,MAAIC,GAAJ;AAEAF,EAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAP2D,CAQ3D;;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYH,WAAZ;AACA,MAAIK,cAAc,GAAG,CAArB;AACA,MAAIC,eAAe,GAAG,CAAtB;;AACA,MAAIN,WAAW,CAACO,MAAZ,IAAsB,CAA1B,EAA6B,CAC7B;AACC;;AAEAP,EAAAA,WAAW,CAACQ,GAAZ,CAAgB,CAACC,IAAD,EAAOC,GAAP,KAAe;AAC9BR,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAD8B,CAE9B;AACA;;AACA,UAAMQ,QAAQ,GAAG,IAAIC,IAAJ,GAAWC,OAAX,KAAuBJ,IAAI,CAACK,IAA7C;AACA,UAAMC,OAAO,GAAGrB,UAAU,CAACI,GAAD,CAA1B;AACA,UAAMkB,UAAU,GAAGrB,GAAG,CAACoB,OAAD,EAAUJ,QAAV,CAAtB;AAEA,UAAMM,UAAU,GAAGrB,oBAAoB,CAACoB,UAAD,EAAaP,IAAb,CAAvC,CAR8B,CAS9B;AACA;AACA;AACA;;AACAQ,IAAAA,UAAU,CAACC,EAAX,CAAc,eAAd,EACGC,QAAD,IAAc;AACZ;AACA;AACA,YAAMC,QAAQ,GAAID,QAAQ,CAACE,gBAAT,GAA4BF,QAAQ,CAACG,UAAtC,GAAoD,GAArE;AACApB,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAeiB,QAAf,GAA0B,QAAtC;;AACA,cAAQD,QAAQ,CAACI,KAAjB;AACE,aAAK,QAAL;AACErB,UAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACA;;AACF,aAAK,SAAL;AACED,UAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACA;;AACF;AAPF;;AASAD,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAeiB,QAAf,GAA0B,QAAtC;AACD,KAhBH,EAiBGI,KAAD,IAAW;AACT;AACAtB,MAAAA,OAAO,CAACC,GAAR,CAAYqB,KAAZ;AACD,KApBH,EAqBG,MAAM;AACL;AACA;AACF3B,MAAAA,cAAc,CAACoB,UAAU,CAACE,QAAX,CAAoBxB,GAArB,CAAd,CAAwC8B,IAAxC,CAA6C,MAAOC,WAAP,IAAuB;AAChExB,QAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCuB,WAAjC;AACA,cAAMzB,QAAQ,CAAC0B,SAAS,CAACD,WAAD,CAAV,CAAd,CAFgE,CAGhE;AACA;;AACAxB,QAAAA,OAAO,CAACC,GAAR,CAAYO,GAAZ,EALgE,CAMhE;AACA;;AACAJ,QAAAA,eAAe;AACfJ,QAAAA,OAAO,CAACC,GAAR,CAAYG,eAAZ;AACD,OAVH;AAWEJ,MAAAA,OAAO,CAACC,GAAR,CAAYE,cAAZ;AACD,KApCH;AAqCEA,IAAAA,cAAc,GAlDc,CAmDhC;AACA;AAEA;AACA;AACA;AACA;AAEA;AACC,GA5DA;AA8DDH,EAAAA,OAAO,CAACC,GAAR,CAAYC,GAAZ;AACA,SAAOA,GAAP;AACH;;GAhF8BL,kB;UAGVP,W;;;KAHUO,kB","sourcesContent":["\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getStorage, ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\nimport app from \"../firebase\"\n\nexport default async  function AddPhotoToFireBase(multiPhotos) {\n\n    // const extraPhotos = useSelector(state => state.product.extraPhotos)\n    const dispatch = useDispatch()\n    console.log(\"TRYING TO GET HERE\");\n    let pho;   \n   \n    console.log(\"multi insde upload\");\n    // console.log(extraPhotos);\n    console.log(multiPhotos);\n    let itemsProcessed = 0\n    let itemsProcessed1 = 0\n    if (multiPhotos.length <= 0) {\n    //   handleUpdate()\n    }\n\n     multiPhotos.map((file, idx) => {\n      console.log(\"upload photo\");\n      //  console.log(file);\n      //  console.log(idx);\n      const fileName = new Date().getTime() + file.name;\n      const storage = getStorage(app)\n      const StorageRef = ref(storage, fileName)\n\n      const uploadTask = uploadBytesResumable(StorageRef, file);\n      // Register three observers:\n      // 1. 'state_changed' observer, called any time the state changes\n      // 2. Error observer, called on failure\n      // 3. Completion observer, called on successful completion\n      uploadTask.on('state_changed',\n        (snapshot) => {\n          // Observe state change events such as progress, pause, and resume\n          // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n          const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n          console.log('Upload is ' + progress + '% done');\n          switch (snapshot.state) {\n            case 'paused':\n              console.log('Upload is paused');\n              break;\n            case 'running':\n              console.log('Upload is running');\n              break;\n            default:\n          }\n          console.log('Upload is ' + progress + '% done');\n        },\n        (error) => {\n          // Handle unsuccessful uploads\n          console.log(error);\n        },\n         () => {\n          // Handle successful uploads on complete\n          // For instance, get the download URL: https://firebasestorage.googleapis.com/...\n        getDownloadURL(uploadTask.snapshot.ref).then(async (downloadURL) => {\n            console.log('File available at', downloadURL);\n            await dispatch(addPhotos(downloadURL))\n            // pho[idx]=idx\n            // console.log(extraPhotos);\n            console.log(idx);\n            // setMultiPhotosUpload(multiPhotosUpload => [...multiPhotosUpload, downloadURL])\n            // photos.push(downloadURL)   \n            itemsProcessed1++\n            console.log(itemsProcessed1);\n          });\n          console.log(itemsProcessed);\n        })\n        itemsProcessed++\n    //   if (itemsProcessed === multiPhotos.length) {\n    //     console.log(\"bout tot call update\");\n\n    //     // setInputs(product => [...product, inputs])\n    //     console.log(extraPhotos);\n    //     console.log(\"running UPDATE\");\n    //     // handleUpdate()\n       \n    //   }\n    }\n    );\n    console.log(pho);\n    return pho\n}\n"]},"metadata":{},"sourceType":"module"}